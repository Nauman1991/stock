{"version":3,"file":"vendure-admin-ui-marketing.js","sources":["../../src/lib/marketing/src/components/promotion-detail/promotion-detail.component.ts","../../src/lib/marketing/src/components/promotion-list/promotion-list.component.ts","../../src/lib/marketing/src/providers/routing/promotion-resolver.ts","../../src/lib/marketing/src/marketing.routes.ts","../../src/lib/marketing/src/marketing.module.ts","../../src/lib/marketing/src/public_api.ts","../../src/lib/marketing/src/vendure-admin-ui-marketing.ts"],"names":["_"],"mappings":"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","sourcesContent":["import { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnDestroy, OnInit } from '@angular/core';\nimport { FormArray, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { marker as _ } from '@biesbjerg/ngx-translate-extract-marker';\nimport {\n    BaseDetailComponent,\n    ConfigurableOperation,\n    ConfigurableOperationDefinition,\n    ConfigurableOperationInput,\n    CreatePromotionInput,\n    DataService,\n    encodeConfigArgValue,\n    getConfigArgValue,\n    getDefaultConfigArgValue,\n    LanguageCode,\n    NotificationService,\n    Promotion,\n    ServerConfigService,\n    UpdatePromotionInput,\n} from '@vendure/admin-ui/core';\nimport { Observable } from 'rxjs';\nimport { mergeMap, take } from 'rxjs/operators';\n\n@Component({\n    selector: 'vdr-promotion-detail',\n    templateUrl: './promotion-detail.component.html',\n    styleUrls: ['./promotion-detail.component.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PromotionDetailComponent extends BaseDetailComponent<Promotion.Fragment>\n    implements OnInit, OnDestroy {\n    promotion$: Observable<Promotion.Fragment>;\n    detailForm: FormGroup;\n    conditions: ConfigurableOperation[] = [];\n    actions: ConfigurableOperation[] = [];\n\n    private allConditions: ConfigurableOperationDefinition[] = [];\n    private allActions: ConfigurableOperationDefinition[] = [];\n\n    constructor(\n        router: Router,\n        route: ActivatedRoute,\n        serverConfigService: ServerConfigService,\n        private changeDetector: ChangeDetectorRef,\n        protected dataService: DataService,\n        private formBuilder: FormBuilder,\n        private notificationService: NotificationService,\n    ) {\n        super(route, router, serverConfigService, dataService);\n        this.detailForm = this.formBuilder.group({\n            name: ['', Validators.required],\n            enabled: true,\n            couponCode: null,\n            perCustomerUsageLimit: null,\n            startsAt: null,\n            endsAt: null,\n            conditions: this.formBuilder.array([]),\n            actions: this.formBuilder.array([]),\n        });\n    }\n\n    ngOnInit() {\n        this.init();\n        this.promotion$ = this.entity$;\n        this.dataService.promotion.getPromotionActionsAndConditions().single$.subscribe(data => {\n            this.allActions = data.promotionActions;\n            this.allConditions = data.promotionConditions;\n            this.changeDetector.markForCheck();\n        });\n    }\n\n    ngOnDestroy() {\n        this.destroy();\n    }\n\n    getAvailableConditions(): ConfigurableOperationDefinition[] {\n        return this.allConditions.filter(o => !this.conditions.find(c => c.code === o.code));\n    }\n\n    getConditionDefinition(condition: ConfigurableOperation): ConfigurableOperationDefinition | undefined {\n        return this.allConditions.find(c => c.code === condition.code);\n    }\n\n    getAvailableActions(): ConfigurableOperationDefinition[] {\n        return this.allActions.filter(o => !this.actions.find(a => a.code === o.code));\n    }\n\n    getActionDefinition(action: ConfigurableOperation): ConfigurableOperationDefinition | undefined {\n        return this.allActions.find(c => c.code === action.code);\n    }\n\n    saveButtonEnabled(): boolean {\n        return (\n            this.detailForm.dirty &&\n            this.detailForm.valid &&\n            (this.conditions.length !== 0 || this.detailForm.value.couponCode) &&\n            this.actions.length !== 0\n        );\n    }\n\n    addCondition(condition: ConfigurableOperation) {\n        this.addOperation('conditions', condition);\n        this.detailForm.markAsDirty();\n    }\n\n    addAction(action: ConfigurableOperation) {\n        this.addOperation('actions', action);\n        this.detailForm.markAsDirty();\n    }\n\n    removeCondition(condition: ConfigurableOperation) {\n        this.removeOperation('conditions', condition);\n        this.detailForm.markAsDirty();\n    }\n\n    removeAction(action: ConfigurableOperation) {\n        this.removeOperation('actions', action);\n        this.detailForm.markAsDirty();\n    }\n\n    formArrayOf(key: 'conditions' | 'actions'): FormArray {\n        return this.detailForm.get(key) as FormArray;\n    }\n\n    create() {\n        if (!this.detailForm.dirty) {\n            return;\n        }\n        const formValue = this.detailForm.value;\n        const input: CreatePromotionInput = {\n            name: formValue.name,\n            enabled: true,\n            couponCode: formValue.couponCode,\n            perCustomerUsageLimit: formValue.perCustomerUsageLimit,\n            startsAt: formValue.startsAt,\n            endsAt: formValue.endsAt,\n            conditions: this.mapOperationsToInputs(this.conditions, formValue.conditions),\n            actions: this.mapOperationsToInputs(this.actions, formValue.actions),\n        };\n        this.dataService.promotion.createPromotion(input).subscribe(\n            ({ createPromotion }) => {\n                switch (createPromotion.__typename) {\n                    case 'Promotion':\n                        this.notificationService.success(_('common.notify-create-success'), {\n                            entity: 'Promotion',\n                        });\n                        this.detailForm.markAsPristine();\n                        this.changeDetector.markForCheck();\n                        this.router.navigate(['../', createPromotion.id], { relativeTo: this.route });\n                        break;\n                    case 'MissingConditionsError':\n                        this.notificationService.error(createPromotion.message);\n                        break;\n                }\n            },\n            err => {\n                this.notificationService.error(_('common.notify-create-error'), {\n                    entity: 'Promotion',\n                });\n            },\n        );\n    }\n\n    save() {\n        if (!this.detailForm.dirty) {\n            return;\n        }\n        const formValue = this.detailForm.value;\n        this.promotion$\n            .pipe(\n                take(1),\n                mergeMap(promotion => {\n                    const input: UpdatePromotionInput = {\n                        id: promotion.id,\n                        name: formValue.name,\n                        enabled: formValue.enabled,\n                        couponCode: formValue.couponCode,\n                        perCustomerUsageLimit: formValue.perCustomerUsageLimit,\n                        startsAt: formValue.startsAt,\n                        endsAt: formValue.endsAt,\n                        conditions: this.mapOperationsToInputs(this.conditions, formValue.conditions),\n                        actions: this.mapOperationsToInputs(this.actions, formValue.actions),\n                    };\n                    return this.dataService.promotion.updatePromotion(input);\n                }),\n            )\n            .subscribe(\n                data => {\n                    this.notificationService.success(_('common.notify-update-success'), {\n                        entity: 'Promotion',\n                    });\n                    this.detailForm.markAsPristine();\n                    this.changeDetector.markForCheck();\n                },\n                err => {\n                    this.notificationService.error(_('common.notify-update-error'), {\n                        entity: 'Promotion',\n                    });\n                },\n            );\n    }\n\n    /**\n     * Update the form values when the entity changes.\n     */\n    protected setFormValues(entity: Promotion.Fragment, languageCode: LanguageCode): void {\n        this.detailForm.patchValue({\n            name: entity.name,\n            enabled: entity.enabled,\n            couponCode: entity.couponCode,\n            perCustomerUsageLimit: entity.perCustomerUsageLimit,\n            startsAt: entity.startsAt,\n            endsAt: entity.endsAt,\n        });\n        entity.conditions.forEach(o => {\n            this.addOperation('conditions', o);\n        });\n        entity.actions.forEach(o => this.addOperation('actions', o));\n    }\n\n    /**\n     * Maps an array of conditions or actions to the input format expected by the GraphQL API.\n     */\n    private mapOperationsToInputs(\n        operations: ConfigurableOperation[],\n        formValueOperations: any,\n    ): ConfigurableOperationInput[] {\n        return operations.map((o, i) => {\n            return {\n                code: o.code,\n                arguments: Object.values<any>(formValueOperations[i].args).map((value, j) => ({\n                    name: o.args[j].name,\n                    value: encodeConfigArgValue(value),\n                })),\n            };\n        });\n    }\n\n    /**\n     * Adds a new condition or action to the promotion.\n     */\n    private addOperation(key: 'conditions' | 'actions', operation: ConfigurableOperation) {\n        const operationsArray = this.formArrayOf(key);\n        const collection = key === 'conditions' ? this.conditions : this.actions;\n        const index = operationsArray.value.findIndex(o => o.code === operation.code);\n        if (index === -1) {\n            const argsHash = operation.args.reduce(\n                (output, arg) => ({\n                    ...output,\n                    [arg.name]:\n                        getConfigArgValue(arg.value) ?? this.getDefaultArgValue(key, operation, arg.name),\n                }),\n                {},\n            );\n            operationsArray.push(\n                this.formBuilder.control({\n                    code: operation.code,\n                    args: argsHash,\n                }),\n            );\n            collection.push({\n                code: operation.code,\n                args: operation.args.map(a => ({ name: a.name, value: getConfigArgValue(a.value) })),\n            });\n        }\n    }\n\n    private getDefaultArgValue(\n        key: 'conditions' | 'actions',\n        operation: ConfigurableOperation,\n        argName: string,\n    ) {\n        const def =\n            key === 'conditions'\n                ? this.allConditions.find(c => c.code === operation.code)\n                : this.allActions.find(a => a.code === operation.code);\n        if (def) {\n            const argDef = def.args.find(a => a.name === argName);\n            if (argDef) {\n                return getDefaultConfigArgValue(argDef);\n            }\n        }\n        throw new Error(`Could not determine default value for \"argName\"`);\n    }\n\n    /**\n     * Removes a condition or action from the promotion.\n     */\n    private removeOperation(key: 'conditions' | 'actions', operation: ConfigurableOperation) {\n        const operationsArray = this.formArrayOf(key);\n        const collection = key === 'conditions' ? this.conditions : this.actions;\n        const index = operationsArray.value.findIndex(o => o.code === operation.code);\n        if (index !== -1) {\n            operationsArray.removeAt(index);\n            collection.splice(index, 1);\n        }\n    }\n}\n","import { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\r\nimport { FormControl, FormGroup } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { marker as _ } from '@biesbjerg/ngx-translate-extract-marker';\r\nimport { BaseListComponent, PromotionFilterParameter, PromotionListOptions } from '@vendure/admin-ui/core';\r\nimport { GetPromotionList } from '@vendure/admin-ui/core';\r\nimport { NotificationService } from '@vendure/admin-ui/core';\r\nimport { DataService } from '@vendure/admin-ui/core';\r\nimport { ModalService } from '@vendure/admin-ui/core';\r\nimport { EMPTY, merge } from 'rxjs';\r\nimport { debounceTime, switchMap, takeUntil } from 'rxjs/operators';\r\n\r\nexport type PromotionSearchForm = {\r\n    name: string;\r\n    couponCode: string;\r\n};\r\n\r\n@Component({\r\n    selector: 'vdr-promotion-list',\r\n    templateUrl: './promotion-list.component.html',\r\n    styleUrls: ['./promotion-list.component.scss'],\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class PromotionListComponent\r\n    extends BaseListComponent<GetPromotionList.Query, GetPromotionList.Items>\r\n    implements OnInit {\r\n    searchForm = new FormGroup({\r\n        name: new FormControl(''),\r\n        couponCode: new FormControl(''),\r\n    });\r\n\r\n    constructor(\r\n        private dataService: DataService,\r\n        router: Router,\r\n        route: ActivatedRoute,\r\n        private notificationService: NotificationService,\r\n        private modalService: ModalService,\r\n    ) {\r\n        super(router, route);\r\n        super.setQueryFn(\r\n            (...args: any[]) => this.dataService.promotion.getPromotions(...args).refetchOnChannelChange(),\r\n            data => data.promotions,\r\n            (skip, take) => this.createQueryOptions(skip, take, this.searchForm.value),\r\n        );\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n\r\n        merge(this.searchForm.valueChanges.pipe(debounceTime(250)), this.route.queryParamMap)\r\n            .pipe(takeUntil(this.destroy$))\r\n            .subscribe(val => {\r\n                if (!val.params) {\r\n                    this.setPageNumber(1);\r\n                }\r\n                this.refresh();\r\n            });\r\n    }\r\n\r\n    deletePromotion(promotionId: string) {\r\n        this.modalService\r\n            .dialog({\r\n                title: _('catalog.confirm-delete-promotion'),\r\n                buttons: [\r\n                    { type: 'secondary', label: _('common.cancel') },\r\n                    { type: 'danger', label: _('common.delete'), returnValue: true },\r\n                ],\r\n            })\r\n            .pipe(\r\n                switchMap(response =>\r\n                    response ? this.dataService.promotion.deletePromotion(promotionId) : EMPTY,\r\n                ),\r\n            )\r\n            .subscribe(\r\n                () => {\r\n                    this.notificationService.success(_('common.notify-delete-success'), {\r\n                        entity: 'Promotion',\r\n                    });\r\n                    this.refresh();\r\n                },\r\n                err => {\r\n                    this.notificationService.error(_('common.notify-delete-error'), {\r\n                        entity: 'Promotion',\r\n                    });\r\n                },\r\n            );\r\n    }\r\n\r\n    private createQueryOptions(\r\n        skip: number,\r\n        take: number,\r\n        searchForm: PromotionSearchForm,\r\n    ): { options: PromotionListOptions } {\r\n        const filter: PromotionFilterParameter = {};\r\n\r\n        if (searchForm.couponCode) {\r\n            filter.couponCode = { contains: searchForm.couponCode };\r\n        }\r\n\r\n        if (searchForm.name) {\r\n            filter.name = { contains: searchForm.name };\r\n        }\r\n\r\n        return {\r\n            options: {\r\n                skip,\r\n                take,\r\n                filter,\r\n            },\r\n        };\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { BaseEntityResolver, DataService, Promotion } from '@vendure/admin-ui/core';\r\n\r\n/**\r\n * Resolves the id from the path into a Customer entity.\r\n */\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class PromotionResolver extends BaseEntityResolver<Promotion.Fragment> {\r\n    constructor(router: Router, dataService: DataService) {\r\n        super(\r\n            router,\r\n            {\r\n                __typename: 'Promotion',\r\n                id: '',\r\n                createdAt: '',\r\n                updatedAt: '',\r\n                name: '',\r\n                enabled: false,\r\n                conditions: [],\r\n                actions: [],\r\n            },\r\n            id => dataService.promotion.getPromotion(id).mapStream(data => data.promotion),\r\n        );\r\n    }\r\n}\r\n","import { Route } from '@angular/router';\r\nimport { marker as _ } from '@biesbjerg/ngx-translate-extract-marker';\r\nimport { CanDeactivateDetailGuard, createResolveData, detailBreadcrumb, Promotion } from '@vendure/admin-ui/core';\r\n\r\nimport { PromotionDetailComponent } from './components/promotion-detail/promotion-detail.component';\r\nimport { PromotionListComponent } from './components/promotion-list/promotion-list.component';\r\nimport { PromotionResolver } from './providers/routing/promotion-resolver';\r\n\r\nexport const marketingRoutes: Route[] = [\r\n    {\r\n        path: 'promotions',\r\n        component: PromotionListComponent,\r\n        data: {\r\n            breadcrumb: _('breadcrumb.promotions'),\r\n        },\r\n    },\r\n    {\r\n        path: 'promotions/:id',\r\n        component: PromotionDetailComponent,\r\n        resolve: createResolveData(PromotionResolver),\r\n        canDeactivate: [CanDeactivateDetailGuard],\r\n        data: {\r\n            breadcrumb: promotionBreadcrumb,\r\n        },\r\n    },\r\n];\r\n\r\nexport function promotionBreadcrumb(data: any, params: any) {\r\n    return detailBreadcrumb<Promotion.Fragment>({\r\n        entity: data.entity,\r\n        id: params.id,\r\n        breadcrumbKey: 'breadcrumb.promotions',\r\n        getName: promotion => promotion.name,\r\n        route: 'promotions',\r\n    });\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule } from '@angular/router';\r\nimport { SharedModule } from '@vendure/admin-ui/core';\r\n\r\nimport { PromotionDetailComponent } from './components/promotion-detail/promotion-detail.component';\r\nimport { PromotionListComponent } from './components/promotion-list/promotion-list.component';\r\nimport { marketingRoutes } from './marketing.routes';\r\n\r\n@NgModule({\r\n    imports: [SharedModule, RouterModule.forChild(marketingRoutes)],\r\n    declarations: [PromotionListComponent, PromotionDetailComponent],\r\n})\r\nexport class MarketingModule {}\r\n","// This file was generated by the build-public-api.ts script\nexport * from './components/promotion-detail/promotion-detail.component';\nexport * from './components/promotion-list/promotion-list.component';\nexport * from './marketing.module';\nexport * from './marketing.routes';\nexport * from './providers/routing/promotion-resolver';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"]}