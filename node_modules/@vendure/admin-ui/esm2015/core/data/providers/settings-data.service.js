import { pick } from '@vendure/common/lib/pick';
import { JobState, } from '../../common/generated-types';
import { ADD_MEMBERS_TO_ZONE, CANCEL_JOB, CREATE_CHANNEL, CREATE_COUNTRY, CREATE_PAYMENT_METHOD, CREATE_TAX_CATEGORY, CREATE_TAX_RATE, CREATE_ZONE, DELETE_CHANNEL, DELETE_COUNTRY, DELETE_PAYMENT_METHOD, DELETE_TAX_CATEGORY, DELETE_TAX_RATE, DELETE_ZONE, GET_ACTIVE_CHANNEL, GET_AVAILABLE_COUNTRIES, GET_CHANNEL, GET_CHANNELS, GET_COUNTRY, GET_COUNTRY_LIST, GET_GLOBAL_SETTINGS, GET_JOBS_BY_ID, GET_JOBS_LIST, GET_JOB_INFO, GET_JOB_QUEUE_LIST, GET_PAYMENT_METHOD, GET_PAYMENT_METHOD_LIST, GET_PAYMENT_METHOD_OPERATIONS, GET_TAX_CATEGORIES, GET_TAX_CATEGORY, GET_TAX_RATE, GET_TAX_RATE_LIST, GET_ZONES, REMOVE_MEMBERS_FROM_ZONE, UPDATE_CHANNEL, UPDATE_COUNTRY, UPDATE_GLOBAL_SETTINGS, UPDATE_PAYMENT_METHOD, UPDATE_TAX_CATEGORY, UPDATE_TAX_RATE, UPDATE_ZONE, } from '../definitions/settings-definitions';
export class SettingsDataService {
    constructor(baseDataService) {
        this.baseDataService = baseDataService;
    }
    getCountries(take = 10, skip = 0, filterTerm) {
        return this.baseDataService.query(GET_COUNTRY_LIST, {
            options: {
                take,
                skip,
                filter: {
                    name: filterTerm ? { contains: filterTerm } : null,
                },
            },
        });
    }
    getAvailableCountries() {
        return this.baseDataService.query(GET_AVAILABLE_COUNTRIES);
    }
    getCountry(id) {
        return this.baseDataService.query(GET_COUNTRY, { id });
    }
    createCountry(input) {
        return this.baseDataService.mutate(CREATE_COUNTRY, {
            input: pick(input, ['code', 'enabled', 'translations']),
        });
    }
    updateCountry(input) {
        return this.baseDataService.mutate(UPDATE_COUNTRY, {
            input: pick(input, ['id', 'code', 'enabled', 'translations']),
        });
    }
    deleteCountry(id) {
        return this.baseDataService.mutate(DELETE_COUNTRY, {
            id,
        });
    }
    getZones() {
        return this.baseDataService.query(GET_ZONES);
    }
    getZone(id) {
        return this.baseDataService.query(GET_ZONES, { id });
    }
    createZone(input) {
        return this.baseDataService.mutate(CREATE_ZONE, {
            input,
        });
    }
    updateZone(input) {
        return this.baseDataService.mutate(UPDATE_ZONE, {
            input,
        });
    }
    deleteZone(id) {
        return this.baseDataService.mutate(DELETE_ZONE, {
            id,
        });
    }
    addMembersToZone(zoneId, memberIds) {
        return this.baseDataService.mutate(ADD_MEMBERS_TO_ZONE, {
            zoneId,
            memberIds,
        });
    }
    removeMembersFromZone(zoneId, memberIds) {
        return this.baseDataService.mutate(REMOVE_MEMBERS_FROM_ZONE, {
            zoneId,
            memberIds,
        });
    }
    getTaxCategories() {
        return this.baseDataService.query(GET_TAX_CATEGORIES);
    }
    getTaxCategory(id) {
        return this.baseDataService.query(GET_TAX_CATEGORY, {
            id,
        });
    }
    createTaxCategory(input) {
        return this.baseDataService.mutate(CREATE_TAX_CATEGORY, {
            input,
        });
    }
    updateTaxCategory(input) {
        return this.baseDataService.mutate(UPDATE_TAX_CATEGORY, {
            input,
        });
    }
    deleteTaxCategory(id) {
        return this.baseDataService.mutate(DELETE_TAX_CATEGORY, {
            id,
        });
    }
    getTaxRates(take = 10, skip = 0, fetchPolicy) {
        return this.baseDataService.query(GET_TAX_RATE_LIST, {
            options: {
                take,
                skip,
            },
        }, fetchPolicy);
    }
    getTaxRate(id) {
        return this.baseDataService.query(GET_TAX_RATE, {
            id,
        });
    }
    createTaxRate(input) {
        return this.baseDataService.mutate(CREATE_TAX_RATE, {
            input,
        });
    }
    updateTaxRate(input) {
        return this.baseDataService.mutate(UPDATE_TAX_RATE, {
            input,
        });
    }
    deleteTaxRate(id) {
        return this.baseDataService.mutate(DELETE_TAX_RATE, {
            id,
        });
    }
    getChannels() {
        return this.baseDataService.query(GET_CHANNELS);
    }
    getChannel(id) {
        return this.baseDataService.query(GET_CHANNEL, {
            id,
        });
    }
    getActiveChannel(fetchPolicy) {
        return this.baseDataService.query(GET_ACTIVE_CHANNEL, {}, fetchPolicy);
    }
    createChannel(input) {
        return this.baseDataService.mutate(CREATE_CHANNEL, {
            input,
        });
    }
    updateChannel(input) {
        return this.baseDataService.mutate(UPDATE_CHANNEL, {
            input,
        });
    }
    deleteChannel(id) {
        return this.baseDataService.mutate(DELETE_CHANNEL, {
            id,
        });
    }
    getPaymentMethods(take = 10, skip = 0) {
        return this.baseDataService.query(GET_PAYMENT_METHOD_LIST, {
            options: {
                skip,
                take,
            },
        });
    }
    getPaymentMethod(id) {
        return this.baseDataService.query(GET_PAYMENT_METHOD, {
            id,
        });
    }
    createPaymentMethod(input) {
        return this.baseDataService.mutate(CREATE_PAYMENT_METHOD, {
            input,
        });
    }
    updatePaymentMethod(input) {
        return this.baseDataService.mutate(UPDATE_PAYMENT_METHOD, {
            input,
        });
    }
    deletePaymentMethod(id, force) {
        return this.baseDataService.mutate(DELETE_PAYMENT_METHOD, {
            id,
            force,
        });
    }
    getPaymentMethodOperations() {
        return this.baseDataService.query(GET_PAYMENT_METHOD_OPERATIONS);
    }
    getGlobalSettings(fetchPolicy) {
        return this.baseDataService.query(GET_GLOBAL_SETTINGS, undefined, fetchPolicy);
    }
    updateGlobalSettings(input) {
        return this.baseDataService.mutate(UPDATE_GLOBAL_SETTINGS, {
            input,
        });
    }
    getJob(id) {
        return this.baseDataService.query(GET_JOB_INFO, { id });
    }
    pollJobs(ids) {
        return this.baseDataService.query(GET_JOBS_BY_ID, {
            ids,
        });
    }
    getAllJobs(options) {
        return this.baseDataService.query(GET_JOBS_LIST, {
            options,
        });
    }
    getJobQueues() {
        return this.baseDataService.query(GET_JOB_QUEUE_LIST);
    }
    getRunningJobs() {
        return this.baseDataService.query(GET_JOBS_LIST, {
            options: {
                filter: {
                    state: {
                        eq: JobState.RUNNING,
                    },
                },
            },
        });
    }
    cancelJob(id) {
        return this.baseDataService.mutate(CANCEL_JOB, {
            id,
        });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2V0dGluZ3MtZGF0YS5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9jb3JlL3NyYy9kYXRhL3Byb3ZpZGVycy9zZXR0aW5ncy1kYXRhLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBRWhELE9BQU8sRUEwQ0gsUUFBUSxHQWdCWCxNQUFNLDhCQUE4QixDQUFDO0FBQ3RDLE9BQU8sRUFDSCxtQkFBbUIsRUFDbkIsVUFBVSxFQUNWLGNBQWMsRUFDZCxjQUFjLEVBQ2QscUJBQXFCLEVBQ3JCLG1CQUFtQixFQUNuQixlQUFlLEVBQ2YsV0FBVyxFQUNYLGNBQWMsRUFDZCxjQUFjLEVBQ2QscUJBQXFCLEVBQ3JCLG1CQUFtQixFQUNuQixlQUFlLEVBQ2YsV0FBVyxFQUNYLGtCQUFrQixFQUNsQix1QkFBdUIsRUFDdkIsV0FBVyxFQUNYLFlBQVksRUFDWixXQUFXLEVBQ1gsZ0JBQWdCLEVBQ2hCLG1CQUFtQixFQUNuQixjQUFjLEVBQ2QsYUFBYSxFQUNiLFlBQVksRUFDWixrQkFBa0IsRUFDbEIsa0JBQWtCLEVBQ2xCLHVCQUF1QixFQUN2Qiw2QkFBNkIsRUFDN0Isa0JBQWtCLEVBQ2xCLGdCQUFnQixFQUNoQixZQUFZLEVBQ1osaUJBQWlCLEVBQ2pCLFNBQVMsRUFDVCx3QkFBd0IsRUFDeEIsY0FBYyxFQUNkLGNBQWMsRUFDZCxzQkFBc0IsRUFDdEIscUJBQXFCLEVBQ3JCLG1CQUFtQixFQUNuQixlQUFlLEVBQ2YsV0FBVyxHQUNkLE1BQU0scUNBQXFDLENBQUM7QUFJN0MsTUFBTSxPQUFPLG1CQUFtQjtJQUM1QixZQUFvQixlQUFnQztRQUFoQyxvQkFBZSxHQUFmLGVBQWUsQ0FBaUI7SUFBRyxDQUFDO0lBRXhELFlBQVksQ0FBQyxPQUFlLEVBQUUsRUFBRSxPQUFlLENBQUMsRUFBRSxVQUFtQjtRQUNqRSxP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QU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQTJDLGNBQWMsRUFBRTtZQUN4RixHQUFHO1NBQ04sQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVELFVBQVUsQ0FBQyxPQUF3QjtRQUMvQixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUF5QyxhQUFhLEVBQUU7WUFDckYsT0FBTztTQUNWLENBQUMsQ0FBQztJQUNQLENBQUM7SUFFRCxZQUFZO1FBQ1IsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBd0Isa0JBQWtCLENBQUMsQ0FBQztJQUNqRixDQUFDO0lBRUQsY0FBYztRQUNWLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQXlDLGFBQWEsRUFBRTtZQUNyRixPQUFPLEVBQUU7Z0JBQ0wsTUFBTSxFQUFFO29CQUNKLEtBQUssRUFBRTt3QkFDSCxFQUFFLEVBQUUsUUFBUSxDQUFDLE9BQU87cUJBQ3ZCO2lCQUNKO2FBQ0o7U0FDSixDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsU0FBUyxDQUFDLEVBQVU7UUFDaEIsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBMEMsVUFBVSxFQUFFO1lBQ3BGLEVBQUU7U0FDTCxDQUFDLENBQUM7SUFDUCxDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGZXRjaFBvbGljeSwgV2F0Y2hRdWVyeUZldGNoUG9saWN5IH0gZnJvbSAnQGFwb2xsby9jbGllbnQvY29yZSc7XHJcbmltcG9ydCB7IHBpY2sgfSBmcm9tICdAdmVuZHVyZS9jb21tb24vbGliL3BpY2snO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIEFkZE1lbWJlcnNUb1pvbmUsXHJcbiAgICBDYW5jZWxKb2IsXHJcbiAgICBDcmVhdGVDaGFubmVsLFxyXG4gICAgQ3JlYXRlQ2hhbm5lbElucHV0LFxyXG4gICAgQ3JlYXRlQ291bnRyeSxcclxuICAgIENyZWF0ZUNvdW50cnlJbnB1dCxcclxuICAgIENyZWF0ZVBheW1lbnRNZXRob2QsXHJcbiAgICBDcmVhdGVQYXltZW50TWV0aG9kSW5wdXQsXHJcbiAgICBDcmVhdGVUYXhDYXRlZ29yeSxcclxuICAgIENyZWF0ZVRheENhdGVnb3J5SW5wdXQsXHJcbiAgICBDcmVhdGVUYXhSYXRlLFxyXG4gICAgQ3JlYXRlVGF4UmF0ZUlucHV0LFxyXG4gICAgQ3JlYXRlWm9uZSxcclxuICAgIENyZWF0ZVpvbmVJbnB1dCxcclxuICAgIERlbGV0ZUNoYW5uZWwsXHJcbiAgICBEZWxldGVDb3VudHJ5LFxyXG4gICAgRGVsZXRlUGF5bWVudE1ldGhvZCxcclxuICAgIERlbGV0ZVRheENhdGVnb3J5LFxyXG4gICAgRGVsZXRlVGF4UmF0ZSxcclxuICAgIERlbGV0ZVpvbmUsXHJcbiAgICBHZXRBY3RpdmVDaGFubmVsLFxyXG4gICAgR2V0QWxsSm9icyxcclxuICAgIEdldEF2YWlsYWJsZUNvdW50cmllcyxcclxuICAgIEdldENoYW5uZWwsXHJcbiAgICBHZXRDaGFubmVscyxcclxuICAgIEdldENvdW50cnksXHJcbiAgICBHZXRDb3VudHJ5TGlzdCxcclxuICAgIEdldEdsb2JhbFNldHRpbmdzLFxyXG4gICAgR2V0Sm9iSW5mbyxcclxuICAgIEdldEpvYlF1ZXVlTGlzdCxcclxuICAgIEdldEpvYnNCeUlkLFxyXG4gICAgR2V0UGF5bWVudE1ldGhvZCxcclxuICAgIEdldFBheW1lbnRNZXRob2RMaXN0LFxyXG4gICAgR2V0UGF5bWVudE1ldGhvZE9wZXJhdGlvbnMsXHJcbiAgICBHZXRUYXhDYXRlZ29yaWVzLFxyXG4gICAgR2V0VGF4Q2F0ZWdvcnksXHJcbiAgICBHZXRUYXhSYXRlLFxyXG4gICAgR2V0VGF4UmF0ZUxpc3QsXHJcbiAgICBHZXRab25lLFxyXG4gICAgR2V0Wm9uZXMsXHJcbiAgICBKb2JMaXN0T3B0aW9ucyxcclxuICAgIEpvYlN0YXRlLFxyXG4gICAgUmVtb3ZlTWVtYmVyc0Zyb21ab25lLFxyXG4gICAgVXBkYXRlQ2hhbm5lbCxcclxuICAgIFVwZGF0ZUNoYW5uZWxJbnB1dCxcclxuICAgIFVwZGF0ZUNvdW50cnksXHJcbiAgICBVcGRhdGVDb3VudHJ5SW5wdXQsXHJcbiAgICBVcGRhdGVHbG9iYWxTZXR0aW5ncyxcclxuICAgIFVwZGF0ZUdsb2JhbFNldHRpbmdzSW5wdXQsXHJcbiAgICBVcGRhdGVQYXltZW50TWV0aG9kLFxyXG4gICAgVXBkYXRlUGF5bWVudE1ldGhvZElucHV0LFxyXG4gICAgVXBkYXRlVGF4Q2F0ZWdvcnksXHJcbiAgICBVcGRhdGVUYXhDYXRlZ29yeUlucHV0LFxyXG4gICAgVXBkYXRlVGF4UmF0ZSxcclxuICAgIFVwZGF0ZVRheFJhdGVJbnB1dCxcclxuICAgIFVwZGF0ZVpvbmUsXHJcbiAgICBVcGRhdGVab25lSW5wdXQsXHJcbn0gZnJvbSAnLi4vLi4vY29tbW9uL2dlbmVyYXRlZC10eXBlcyc7XHJcbmltcG9ydCB7XHJcbiAgICBBRERfTUVNQkVSU19UT19aT05FLFxyXG4gICAgQ0FOQ0VMX0pPQixcclxuICAgIENSRUFURV9DSEFOTkVMLFxyXG4gICAgQ1JFQVRFX0NPVU5UUlksXHJcbiAgICBDUkVBVEVfUEFZTUVOVF9NRVRIT0QsXHJcbiAgICBDUkVBVEVfVEFYX0NBVEVHT1JZLFxyXG4gICAgQ1JFQVRFX1RBWF9SQVRFLFxyXG4gICAgQ1JFQVRFX1pPTkUsXHJcbiAgICBERUxFVEVfQ0hBTk5FTCxcclxuICAgIERFTEVURV9DT1VOVFJZLFxyXG4gICAgREVMRVRFX1BBWU1FTlRfTUVUSE9ELFxyXG4gICAgREVMRVRFX1RBWF9DQVRFR09SWSxcclxuICAgIERFTEVURV9UQVhfUkFURSxcclxuICAgIERFTEVURV9aT05FLFxyXG4gICAgR0VUX0FDVElWRV9DSEFOTkVMLFxyXG4gICAgR0VUX0FWQUlMQUJMRV9DT1VOVFJJRVMsXHJcbiAgICBHRVRfQ0hBTk5FTCxcclxuICAgIEdFVF9DSEFOTkVMUyxcclxuICAgIEdFVF9DT1VOVFJZLFxyXG4gICAgR0VUX0NPVU5UUllfTElTVCxcclxuICAgIEdFVF9HTE9CQUxfU0VUVElOR1MsXHJcbiAgICBHRVRfSk9CU19CWV9JRCxcclxuICAgIEdFVF9KT0JTX0xJU1QsXHJcbiAgICBHRVRfSk9CX0lORk8sXHJcbiAgICBHRVRfSk9CX1FVRVVFX0xJU1QsXHJcbiAgICBHRVRfUEFZTUVOVF9NRVRIT0QsXHJcbiAgICBHRVRfUEFZTUVOVF9NRVRIT0RfTElTVCxcclxuICAgIEdFVF9QQVlNRU5UX01FVEhPRF9PUEVSQVRJT05TLFxyXG4gICAgR0VUX1RBWF9DQVRFR09SSUVTLFxyXG4gICAgR0VUX1RBWF9DQVRFR09SWSxcclxuICAgIEdFVF9UQVhfUkFURSxcclxuICAgIEdFVF9UQVhfUkFURV9MSVNULFxyXG4gICAgR0VUX1pPTkVTLFxyXG4gICAgUkVNT1ZFX01FTUJFUlNfRlJPTV9aT05FLFxyXG4gICAgVVBEQVRFX0NIQU5ORUwsXHJcbiAgICBVUERBVEVfQ09VTlRSWSxcclxuICAgIFVQREFURV9HTE9CQUxfU0VUVElOR1MsXHJcbiAgICBVUERBVEVfUEFZTUVOVF9NRVRIT0QsXHJcbiAgICBVUERBVEVfVEFYX0NBVEVHT1JZLFxyXG4gICAgVVBEQVRFX1RBWF9SQVRFLFxyXG4gICAgVVBEQVRFX1pPTkUsXHJcbn0gZnJvbSAnLi4vZGVmaW5pdGlvbnMvc2V0dGluZ3MtZGVmaW5pdGlvbnMnO1xyXG5cclxuaW1wb3J0IHsgQmFzZURhdGFTZXJ2aWNlIH0gZnJvbSAnLi9iYXNlLWRhdGEuc2VydmljZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgU2V0dGluZ3NEYXRhU2VydmljZSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGJhc2VEYXRhU2VydmljZTogQmFzZURhdGFTZXJ2aWNlKSB7fVxyXG5cclxuICAgIGdldENvdW50cmllcyh0YWtlOiBudW1iZXIgPSAxMCwgc2tpcDogbnVtYmVyID0gMCwgZmlsdGVyVGVybT86IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxHZXRDb3VudHJ5TGlzdC5RdWVyeSwgR2V0Q291bnRyeUxpc3QuVmFyaWFibGVzPihHRVRfQ09VTlRSWV9MSVNULCB7XHJcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgIHRha2UsXHJcbiAgICAgICAgICAgICAgICBza2lwLFxyXG4gICAgICAgICAgICAgICAgZmlsdGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZmlsdGVyVGVybSA/IHsgY29udGFpbnM6IGZpbHRlclRlcm0gfSA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEF2YWlsYWJsZUNvdW50cmllcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UucXVlcnk8R2V0QXZhaWxhYmxlQ291bnRyaWVzLlF1ZXJ5PihHRVRfQVZBSUxBQkxFX0NPVU5UUklFUyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q291bnRyeShpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLnF1ZXJ5PEdldENvdW50cnkuUXVlcnksIEdldENvdW50cnkuVmFyaWFibGVzPihHRVRfQ09VTlRSWSwgeyBpZCB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVDb3VudHJ5KGlucHV0OiBDcmVhdGVDb3VudHJ5SW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPENyZWF0ZUNvdW50cnkuTXV0YXRpb24sIENyZWF0ZUNvdW50cnkuVmFyaWFibGVzPihDUkVBVEVfQ09VTlRSWSwge1xyXG4gICAgICAgICAgICBpbnB1dDogcGljayhpbnB1dCwgWydjb2RlJywgJ2VuYWJsZWQnLCAndHJhbnNsYXRpb25zJ10pLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUNvdW50cnkoaW5wdXQ6IFVwZGF0ZUNvdW50cnlJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8VXBkYXRlQ291bnRyeS5NdXRhdGlvbiwgVXBkYXRlQ291bnRyeS5WYXJpYWJsZXM+KFVQREFURV9DT1VOVFJZLCB7XHJcbiAgICAgICAgICAgIGlucHV0OiBwaWNrKGlucHV0LCBbJ2lkJywgJ2NvZGUnLCAnZW5hYmxlZCcsICd0cmFuc2xhdGlvbnMnXSksXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlQ291bnRyeShpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxEZWxldGVDb3VudHJ5Lk11dGF0aW9uLCBEZWxldGVDb3VudHJ5LlZhcmlhYmxlcz4oREVMRVRFX0NPVU5UUlksIHtcclxuICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Wm9uZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLnF1ZXJ5PEdldFpvbmVzLlF1ZXJ5PihHRVRfWk9ORVMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFpvbmUoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxHZXRab25lLlF1ZXJ5LCBHZXRab25lLlZhcmlhYmxlcz4oR0VUX1pPTkVTLCB7IGlkIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVpvbmUoaW5wdXQ6IENyZWF0ZVpvbmVJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8Q3JlYXRlWm9uZS5NdXRhdGlvbiwgQ3JlYXRlWm9uZS5WYXJpYWJsZXM+KENSRUFURV9aT05FLCB7XHJcbiAgICAgICAgICAgIGlucHV0LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVpvbmUoaW5wdXQ6IFVwZGF0ZVpvbmVJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8VXBkYXRlWm9uZS5NdXRhdGlvbiwgVXBkYXRlWm9uZS5WYXJpYWJsZXM+KFVQREFURV9aT05FLCB7XHJcbiAgICAgICAgICAgIGlucHV0LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZVpvbmUoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8RGVsZXRlWm9uZS5NdXRhdGlvbiwgRGVsZXRlWm9uZS5WYXJpYWJsZXM+KERFTEVURV9aT05FLCB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZE1lbWJlcnNUb1pvbmUoem9uZUlkOiBzdHJpbmcsIG1lbWJlcklkczogc3RyaW5nW10pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPEFkZE1lbWJlcnNUb1pvbmUuTXV0YXRpb24sIEFkZE1lbWJlcnNUb1pvbmUuVmFyaWFibGVzPihcclxuICAgICAgICAgICAgQUREX01FTUJFUlNfVE9fWk9ORSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgem9uZUlkLFxyXG4gICAgICAgICAgICAgICAgbWVtYmVySWRzLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlTWVtYmVyc0Zyb21ab25lKHpvbmVJZDogc3RyaW5nLCBtZW1iZXJJZHM6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxSZW1vdmVNZW1iZXJzRnJvbVpvbmUuTXV0YXRpb24sIFJlbW92ZU1lbWJlcnNGcm9tWm9uZS5WYXJpYWJsZXM+KFxyXG4gICAgICAgICAgICBSRU1PVkVfTUVNQkVSU19GUk9NX1pPTkUsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHpvbmVJZCxcclxuICAgICAgICAgICAgICAgIG1lbWJlcklkcyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRheENhdGVnb3JpZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLnF1ZXJ5PEdldFRheENhdGVnb3JpZXMuUXVlcnk+KEdFVF9UQVhfQ0FURUdPUklFUyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VGF4Q2F0ZWdvcnkoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxHZXRUYXhDYXRlZ29yeS5RdWVyeSwgR2V0VGF4Q2F0ZWdvcnkuVmFyaWFibGVzPihHRVRfVEFYX0NBVEVHT1JZLCB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVRheENhdGVnb3J5KGlucHV0OiBDcmVhdGVUYXhDYXRlZ29yeUlucHV0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxDcmVhdGVUYXhDYXRlZ29yeS5NdXRhdGlvbiwgQ3JlYXRlVGF4Q2F0ZWdvcnkuVmFyaWFibGVzPihcclxuICAgICAgICAgICAgQ1JFQVRFX1RBWF9DQVRFR09SWSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW5wdXQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVUYXhDYXRlZ29yeShpbnB1dDogVXBkYXRlVGF4Q2F0ZWdvcnlJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8VXBkYXRlVGF4Q2F0ZWdvcnkuTXV0YXRpb24sIFVwZGF0ZVRheENhdGVnb3J5LlZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIFVQREFURV9UQVhfQ0FURUdPUlksXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlucHV0LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlVGF4Q2F0ZWdvcnkoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8RGVsZXRlVGF4Q2F0ZWdvcnkuTXV0YXRpb24sIERlbGV0ZVRheFJhdGUuVmFyaWFibGVzPihcclxuICAgICAgICAgICAgREVMRVRFX1RBWF9DQVRFR09SWSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUYXhSYXRlcyh0YWtlOiBudW1iZXIgPSAxMCwgc2tpcDogbnVtYmVyID0gMCwgZmV0Y2hQb2xpY3k/OiBGZXRjaFBvbGljeSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxHZXRUYXhSYXRlTGlzdC5RdWVyeSwgR2V0VGF4UmF0ZUxpc3QuVmFyaWFibGVzPihcclxuICAgICAgICAgICAgR0VUX1RBWF9SQVRFX0xJU1QsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgICAgICB0YWtlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNraXAsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmZXRjaFBvbGljeSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRheFJhdGUoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxHZXRUYXhSYXRlLlF1ZXJ5LCBHZXRUYXhSYXRlLlZhcmlhYmxlcz4oR0VUX1RBWF9SQVRFLCB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVRheFJhdGUoaW5wdXQ6IENyZWF0ZVRheFJhdGVJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8Q3JlYXRlVGF4UmF0ZS5NdXRhdGlvbiwgQ3JlYXRlVGF4UmF0ZS5WYXJpYWJsZXM+KENSRUFURV9UQVhfUkFURSwge1xyXG4gICAgICAgICAgICBpbnB1dCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVUYXhSYXRlKGlucHV0OiBVcGRhdGVUYXhSYXRlSW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPFVwZGF0ZVRheFJhdGUuTXV0YXRpb24sIFVwZGF0ZVRheFJhdGUuVmFyaWFibGVzPihVUERBVEVfVEFYX1JBVEUsIHtcclxuICAgICAgICAgICAgaW5wdXQsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlVGF4UmF0ZShpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxEZWxldGVUYXhSYXRlLk11dGF0aW9uLCBEZWxldGVUYXhSYXRlLlZhcmlhYmxlcz4oREVMRVRFX1RBWF9SQVRFLCB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENoYW5uZWxzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxHZXRDaGFubmVscy5RdWVyeT4oR0VUX0NIQU5ORUxTKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDaGFubmVsKGlkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UucXVlcnk8R2V0Q2hhbm5lbC5RdWVyeSwgR2V0Q2hhbm5lbC5WYXJpYWJsZXM+KEdFVF9DSEFOTkVMLCB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEFjdGl2ZUNoYW5uZWwoZmV0Y2hQb2xpY3k/OiBGZXRjaFBvbGljeSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxHZXRBY3RpdmVDaGFubmVsLlF1ZXJ5LCBHZXRBY3RpdmVDaGFubmVsLlZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIEdFVF9BQ1RJVkVfQ0hBTk5FTCxcclxuICAgICAgICAgICAge30sXHJcbiAgICAgICAgICAgIGZldGNoUG9saWN5LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlQ2hhbm5lbChpbnB1dDogQ3JlYXRlQ2hhbm5lbElucHV0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxDcmVhdGVDaGFubmVsLk11dGF0aW9uLCBDcmVhdGVDaGFubmVsLlZhcmlhYmxlcz4oQ1JFQVRFX0NIQU5ORUwsIHtcclxuICAgICAgICAgICAgaW5wdXQsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQ2hhbm5lbChpbnB1dDogVXBkYXRlQ2hhbm5lbElucHV0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxVcGRhdGVDaGFubmVsLk11dGF0aW9uLCBVcGRhdGVDaGFubmVsLlZhcmlhYmxlcz4oVVBEQVRFX0NIQU5ORUwsIHtcclxuICAgICAgICAgICAgaW5wdXQsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlQ2hhbm5lbChpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxEZWxldGVDaGFubmVsLk11dGF0aW9uLCBEZWxldGVDaGFubmVsLlZhcmlhYmxlcz4oREVMRVRFX0NIQU5ORUwsIHtcclxuICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UGF5bWVudE1ldGhvZHModGFrZTogbnVtYmVyID0gMTAsIHNraXA6IG51bWJlciA9IDApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UucXVlcnk8R2V0UGF5bWVudE1ldGhvZExpc3QuUXVlcnksIEdldFBheW1lbnRNZXRob2RMaXN0LlZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIEdFVF9QQVlNRU5UX01FVEhPRF9MSVNULFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2tpcCxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFBheW1lbnRNZXRob2QoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxHZXRQYXltZW50TWV0aG9kLlF1ZXJ5LCBHZXRQYXltZW50TWV0aG9kLlZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIEdFVF9QQVlNRU5UX01FVEhPRCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVQYXltZW50TWV0aG9kKGlucHV0OiBDcmVhdGVQYXltZW50TWV0aG9kSW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPENyZWF0ZVBheW1lbnRNZXRob2QuTXV0YXRpb24sIENyZWF0ZVBheW1lbnRNZXRob2QuVmFyaWFibGVzPihcclxuICAgICAgICAgICAgQ1JFQVRFX1BBWU1FTlRfTUVUSE9ELFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVBheW1lbnRNZXRob2QoaW5wdXQ6IFVwZGF0ZVBheW1lbnRNZXRob2RJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8VXBkYXRlUGF5bWVudE1ldGhvZC5NdXRhdGlvbiwgVXBkYXRlUGF5bWVudE1ldGhvZC5WYXJpYWJsZXM+KFxyXG4gICAgICAgICAgICBVUERBVEVfUEFZTUVOVF9NRVRIT0QsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlucHV0LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlUGF5bWVudE1ldGhvZChpZDogc3RyaW5nLCBmb3JjZTogYm9vbGVhbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8RGVsZXRlUGF5bWVudE1ldGhvZC5NdXRhdGlvbiwgRGVsZXRlUGF5bWVudE1ldGhvZC5WYXJpYWJsZXM+KFxyXG4gICAgICAgICAgICBERUxFVEVfUEFZTUVOVF9NRVRIT0QsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICAgICAgZm9yY2UsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQYXltZW50TWV0aG9kT3BlcmF0aW9ucygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UucXVlcnk8R2V0UGF5bWVudE1ldGhvZE9wZXJhdGlvbnMuUXVlcnk+KEdFVF9QQVlNRU5UX01FVEhPRF9PUEVSQVRJT05TKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRHbG9iYWxTZXR0aW5ncyhmZXRjaFBvbGljeT86IFdhdGNoUXVlcnlGZXRjaFBvbGljeSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxHZXRHbG9iYWxTZXR0aW5ncy5RdWVyeT4oXHJcbiAgICAgICAgICAgIEdFVF9HTE9CQUxfU0VUVElOR1MsXHJcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgZmV0Y2hQb2xpY3ksXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVHbG9iYWxTZXR0aW5ncyhpbnB1dDogVXBkYXRlR2xvYmFsU2V0dGluZ3NJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8VXBkYXRlR2xvYmFsU2V0dGluZ3MuTXV0YXRpb24sIFVwZGF0ZUdsb2JhbFNldHRpbmdzLlZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIFVQREFURV9HTE9CQUxfU0VUVElOR1MsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlucHV0LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Sm9iKGlkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UucXVlcnk8R2V0Sm9iSW5mby5RdWVyeSwgR2V0Sm9iSW5mby5WYXJpYWJsZXM+KEdFVF9KT0JfSU5GTywgeyBpZCB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwb2xsSm9icyhpZHM6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLnF1ZXJ5PEdldEpvYnNCeUlkLlF1ZXJ5LCBHZXRKb2JzQnlJZC5WYXJpYWJsZXM+KEdFVF9KT0JTX0JZX0lELCB7XHJcbiAgICAgICAgICAgIGlkcyxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBbGxKb2JzKG9wdGlvbnM/OiBKb2JMaXN0T3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxHZXRBbGxKb2JzLlF1ZXJ5LCBHZXRBbGxKb2JzLlZhcmlhYmxlcz4oR0VUX0pPQlNfTElTVCwge1xyXG4gICAgICAgICAgICBvcHRpb25zLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEpvYlF1ZXVlcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UucXVlcnk8R2V0Sm9iUXVldWVMaXN0LlF1ZXJ5PihHRVRfSk9CX1FVRVVFX0xJU1QpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFJ1bm5pbmdKb2JzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxHZXRBbGxKb2JzLlF1ZXJ5LCBHZXRBbGxKb2JzLlZhcmlhYmxlcz4oR0VUX0pPQlNfTElTVCwge1xyXG4gICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICBmaWx0ZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcTogSm9iU3RhdGUuUlVOTklORyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5jZWxKb2IoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8Q2FuY2VsSm9iLk11dGF0aW9uLCBDYW5jZWxKb2IuVmFyaWFibGVzPihDQU5DRUxfSk9CLCB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==