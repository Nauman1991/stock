import { ADD_CUSTOMERS_TO_GROUP, ADD_NOTE_TO_CUSTOMER, CREATE_CUSTOMER, CREATE_CUSTOMER_ADDRESS, CREATE_CUSTOMER_GROUP, DELETE_CUSTOMER, DELETE_CUSTOMER_GROUP, DELETE_CUSTOMER_NOTE, GET_CUSTOMER, GET_CUSTOMER_GROUP_WITH_CUSTOMERS, GET_CUSTOMER_GROUPS, GET_CUSTOMER_HISTORY, GET_CUSTOMER_LIST, REMOVE_CUSTOMERS_FROM_GROUP, UPDATE_CUSTOMER, UPDATE_CUSTOMER_ADDRESS, UPDATE_CUSTOMER_GROUP, UPDATE_CUSTOMER_NOTE, } from '../definitions/customer-definitions';
export class CustomerDataService {
    constructor(baseDataService) {
        this.baseDataService = baseDataService;
    }
    getCustomerList(take = 10, skip = 0, filterTerm) {
        const filter = filterTerm
            ? {
                filter: {
                    emailAddress: {
                        contains: filterTerm,
                    },
                },
            }
            : {};
        return this.baseDataService.query(GET_CUSTOMER_LIST, {
            options: Object.assign({ take,
                skip }, filter),
        });
    }
    getCustomer(id, orderListOptions) {
        return this.baseDataService.query(GET_CUSTOMER, {
            id,
            orderListOptions,
        });
    }
    createCustomer(input, password) {
        return this.baseDataService.mutate(CREATE_CUSTOMER, {
            input,
            password,
        });
    }
    updateCustomer(input) {
        return this.baseDataService.mutate(UPDATE_CUSTOMER, {
            input,
        });
    }
    deleteCustomer(id) {
        return this.baseDataService.mutate(DELETE_CUSTOMER, { id });
    }
    createCustomerAddress(customerId, input) {
        return this.baseDataService.mutate(CREATE_CUSTOMER_ADDRESS, {
            customerId,
            input,
        });
    }
    updateCustomerAddress(input) {
        return this.baseDataService.mutate(UPDATE_CUSTOMER_ADDRESS, {
            input,
        });
    }
    createCustomerGroup(input) {
        return this.baseDataService.mutate(CREATE_CUSTOMER_GROUP, {
            input,
        });
    }
    updateCustomerGroup(input) {
        return this.baseDataService.mutate(UPDATE_CUSTOMER_GROUP, {
            input,
        });
    }
    deleteCustomerGroup(id) {
        return this.baseDataService.mutate(DELETE_CUSTOMER_GROUP, { id });
    }
    getCustomerGroupList(options) {
        return this.baseDataService.query(GET_CUSTOMER_GROUPS, {
            options,
        });
    }
    getCustomerGroupWithCustomers(id, options) {
        return this.baseDataService.query(GET_CUSTOMER_GROUP_WITH_CUSTOMERS, {
            id,
            options,
        });
    }
    addCustomersToGroup(groupId, customerIds) {
        return this.baseDataService.mutate(ADD_CUSTOMERS_TO_GROUP, {
            groupId,
            customerIds,
        });
    }
    removeCustomersFromGroup(groupId, customerIds) {
        return this.baseDataService.mutate(REMOVE_CUSTOMERS_FROM_GROUP, {
            groupId,
            customerIds,
        });
    }
    getCustomerHistory(id, options) {
        return this.baseDataService.query(GET_CUSTOMER_HISTORY, {
            id,
            options,
        });
    }
    addNoteToCustomer(customerId, note) {
        return this.baseDataService.mutate(ADD_NOTE_TO_CUSTOMER, {
            input: {
                note,
                isPublic: false,
                id: customerId,
            },
        });
    }
    updateCustomerNote(input) {
        return this.baseDataService.mutate(UPDATE_CUSTOMER_NOTE, {
            input,
        });
    }
    deleteCustomerNote(id) {
        return this.baseDataService.mutate(DELETE_CUSTOMER_NOTE, {
            id,
        });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3VzdG9tZXItZGF0YS5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9jb3JlL3NyYy9kYXRhL3Byb3ZpZGVycy9jdXN0b21lci1kYXRhLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBK0JBLE9BQU8sRUFDSCxzQkFBc0IsRUFDdEIsb0JBQW9CLEVBQ3BCLGVBQWUsRUFDZix1QkFBdUIsRUFDdkIscUJBQXFCLEVBQ3JCLGVBQWUsRUFDZixxQkFBcUIsRUFDckIsb0JBQW9CLEVBQ3BCLFlBQVksRUFDWixpQ0FBaUMsRUFDakMsbUJBQW1CLEVBQ25CLG9CQUFvQixFQUNwQixpQkFBaUIsRUFDakIsMkJBQTJCLEVBQzNCLGVBQWUsRUFDZix1QkFBdUIsRUFDdkIscUJBQXFCLEVBQ3JCLG9CQUFvQixHQUN2QixNQUFNLHFDQUFxQyxDQUFDO0FBSTdDLE1BQU0sT0FBTyxtQkFBbUI7SUFDNUIsWUFBb0IsZUFBZ0M7UUFBaEMsb0JBQWUsR0FBZixlQUFlLENBQWlCO0lBQUcsQ0FBQztJQUV4RCxlQUFlLENBQUMsT0FBZSxFQUFFLEVBQUUsT0FBZSxDQUFDLEVBQUUsVUFBbUI7UUFDcEUsTUFBTSxNQUFNLEdBQUcsVUFBVTtZQUNyQixDQUFDLENBQUM7Z0JBQ0ksTUFBTSxFQUFFO29CQUNKLFlBQVksRUFBRTt3QkFDVixRQUFRLEVBQUUsVUFBVTtxQkFDdkI7aUJBQ0o7YUFDSjtZQUNILENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDVCxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUM3QixpQkFBaUIsRUFDakI7WUFDSSxPQUFPLGtCQUNILElBQUk7Z0JBQ0osSUFBSSxJQUNELE1BQU0sQ0FDWjtTQUNKLENBQ0osQ0FBQztJQUNOLENBQUM7SUFFRCxXQUFXLENBQUMsRUFBVSxFQUFFLGdCQUFtQztRQUN2RCxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUEyQyxZQUFZ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LENBQUM7SUFDTixDQUFDO0lBRUQsa0JBQWtCLENBQUMsS0FBOEI7UUFDN0MsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FDOUIsb0JBQW9CLEVBQ3BCO1lBQ0ksS0FBSztTQUNSLENBQ0osQ0FBQztJQUNOLENBQUM7SUFFRCxrQkFBa0IsQ0FBQyxFQUFVO1FBQ3pCLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQzlCLG9CQUFvQixFQUNwQjtZQUNJLEVBQUU7U0FDTCxDQUNKLENBQUM7SUFDTixDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gICAgQWRkQ3VzdG9tZXJzVG9Hcm91cCxcclxuICAgIEFkZE5vdGVUb0N1c3RvbWVyLFxyXG4gICAgQ3JlYXRlQWRkcmVzc0lucHV0LFxyXG4gICAgQ3JlYXRlQ3VzdG9tZXIsXHJcbiAgICBDcmVhdGVDdXN0b21lckFkZHJlc3MsXHJcbiAgICBDcmVhdGVDdXN0b21lckdyb3VwLFxyXG4gICAgQ3JlYXRlQ3VzdG9tZXJHcm91cElucHV0LFxyXG4gICAgQ3JlYXRlQ3VzdG9tZXJJbnB1dCxcclxuICAgIEN1c3RvbWVyR3JvdXBMaXN0T3B0aW9ucyxcclxuICAgIEN1c3RvbWVyTGlzdE9wdGlvbnMsXHJcbiAgICBEZWxldGVDdXN0b21lcixcclxuICAgIERlbGV0ZUN1c3RvbWVyR3JvdXAsXHJcbiAgICBEZWxldGVDdXN0b21lck5vdGUsXHJcbiAgICBHZXRDdXN0b21lcixcclxuICAgIEdldEN1c3RvbWVyR3JvdXBzLFxyXG4gICAgR2V0Q3VzdG9tZXJHcm91cFdpdGhDdXN0b21lcnMsXHJcbiAgICBHZXRDdXN0b21lckhpc3RvcnksXHJcbiAgICBHZXRDdXN0b21lckxpc3QsXHJcbiAgICBIaXN0b3J5RW50cnlMaXN0T3B0aW9ucyxcclxuICAgIE9yZGVyTGlzdE9wdGlvbnMsXHJcbiAgICBSZW1vdmVDdXN0b21lcnNGcm9tR3JvdXAsXHJcbiAgICBVcGRhdGVBZGRyZXNzSW5wdXQsXHJcbiAgICBVcGRhdGVDdXN0b21lcixcclxuICAgIFVwZGF0ZUN1c3RvbWVyQWRkcmVzcyxcclxuICAgIFVwZGF0ZUN1c3RvbWVyR3JvdXAsXHJcbiAgICBVcGRhdGVDdXN0b21lckdyb3VwSW5wdXQsXHJcbiAgICBVcGRhdGVDdXN0b21lcklucHV0LFxyXG4gICAgVXBkYXRlQ3VzdG9tZXJOb3RlLFxyXG4gICAgVXBkYXRlQ3VzdG9tZXJOb3RlSW5wdXQsXHJcbn0gZnJvbSAnLi4vLi4vY29tbW9uL2dlbmVyYXRlZC10eXBlcyc7XHJcbmltcG9ydCB7XHJcbiAgICBBRERfQ1VTVE9NRVJTX1RPX0dST1VQLFxyXG4gICAgQUREX05PVEVfVE9fQ1VTVE9NRVIsXHJcbiAgICBDUkVBVEVfQ1VTVE9NRVIsXHJcbiAgICBDUkVBVEVfQ1VTVE9NRVJfQUREUkVTUyxcclxuICAgIENSRUFURV9DVVNUT01FUl9HUk9VUCxcclxuICAgIERFTEVURV9DVVNUT01FUixcclxuICAgIERFTEVURV9DVVNUT01FUl9HUk9VUCxcclxuICAgIERFTEVURV9DVVNUT01FUl9OT1RFLFxyXG4gICAgR0VUX0NVU1RPTUVSLFxyXG4gICAgR0VUX0NVU1RPTUVSX0dST1VQX1dJVEhfQ1VTVE9NRVJTLFxyXG4gICAgR0VUX0NVU1RPTUVSX0dST1VQUyxcclxuICAgIEdFVF9DVVNUT01FUl9ISVNUT1JZLFxyXG4gICAgR0VUX0NVU1RPTUVSX0xJU1QsXHJcbiAgICBSRU1PVkVfQ1VTVE9NRVJTX0ZST01fR1JPVVAsXHJcbiAgICBVUERBVEVfQ1VTVE9NRVIsXHJcbiAgICBVUERBVEVfQ1VTVE9NRVJfQUREUkVTUyxcclxuICAgIFVQREFURV9DVVNUT01FUl9HUk9VUCxcclxuICAgIFVQREFURV9DVVNUT01FUl9OT1RFLFxyXG59IGZyb20gJy4uL2RlZmluaXRpb25zL2N1c3RvbWVyLWRlZmluaXRpb25zJztcclxuXHJcbmltcG9ydCB7IEJhc2VEYXRhU2VydmljZSB9IGZyb20gJy4vYmFzZS1kYXRhLnNlcnZpY2UnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEN1c3RvbWVyRGF0YVNlcnZpY2Uge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBiYXNlRGF0YVNlcnZpY2U6IEJhc2VEYXRhU2VydmljZSkge31cclxuXHJcbiAgICBnZXRDdXN0b21lckxpc3QodGFrZTogbnVtYmVyID0gMTAsIHNraXA6IG51bWJlciA9IDAsIGZpbHRlclRlcm0/OiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zdCBmaWx0ZXIgPSBmaWx0ZXJUZXJtXHJcbiAgICAgICAgICAgID8ge1xyXG4gICAgICAgICAgICAgICAgICBmaWx0ZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgIGVtYWlsQWRkcmVzczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5zOiBmaWx0ZXJUZXJtLFxyXG4gICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIDoge307XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLnF1ZXJ5PEdldEN1c3RvbWVyTGlzdC5RdWVyeSwgR2V0Q3VzdG9tZXJMaXN0LlZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIEdFVF9DVVNUT01FUl9MSVNULFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZSxcclxuICAgICAgICAgICAgICAgICAgICBza2lwLFxyXG4gICAgICAgICAgICAgICAgICAgIC4uLmZpbHRlcixcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDdXN0b21lcihpZDogc3RyaW5nLCBvcmRlckxpc3RPcHRpb25zPzogT3JkZXJMaXN0T3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxHZXRDdXN0b21lci5RdWVyeSwgR2V0Q3VzdG9tZXIuVmFyaWFibGVzPihHRVRfQ1VTVE9NRVIsIHtcclxuICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgIG9yZGVyTGlzdE9wdGlvbnMsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlQ3VzdG9tZXIoaW5wdXQ6IENyZWF0ZUN1c3RvbWVySW5wdXQsIHBhc3N3b3JkPzogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxDcmVhdGVDdXN0b21lci5NdXRhdGlvbiwgQ3JlYXRlQ3VzdG9tZXIuVmFyaWFibGVzPihcclxuICAgICAgICAgICAgQ1JFQVRFX0NVU1RPTUVSLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dCxcclxuICAgICAgICAgICAgICAgIHBhc3N3b3JkLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQ3VzdG9tZXIoaW5wdXQ6IFVwZGF0ZUN1c3RvbWVySW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPFVwZGF0ZUN1c3RvbWVyLk11dGF0aW9uLCBVcGRhdGVDdXN0b21lci5WYXJpYWJsZXM+KFxyXG4gICAgICAgICAgICBVUERBVEVfQ1VTVE9NRVIsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlucHV0LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlQ3VzdG9tZXIoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8RGVsZXRlQ3VzdG9tZXIuTXV0YXRpb24sIERlbGV0ZUN1c3RvbWVyLlZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIERFTEVURV9DVVNUT01FUixcclxuICAgICAgICAgICAgeyBpZCB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlQ3VzdG9tZXJBZGRyZXNzKGN1c3RvbWVySWQ6IHN0cmluZywgaW5wdXQ6IENyZWF0ZUFkZHJlc3NJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8Q3JlYXRlQ3VzdG9tZXJBZGRyZXNzLk11dGF0aW9uLCBDcmVhdGVDdXN0b21lckFkZHJlc3MuVmFyaWFibGVzPihcclxuICAgICAgICAgICAgQ1JFQVRFX0NVU1RPTUVSX0FERFJFU1MsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGN1c3RvbWVySWQsXHJcbiAgICAgICAgICAgICAgICBpbnB1dCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUN1c3RvbWVyQWRkcmVzcyhpbnB1dDogVXBkYXRlQWRkcmVzc0lucHV0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxVcGRhdGVDdXN0b21lckFkZHJlc3MuTXV0YXRpb24sIFVwZGF0ZUN1c3RvbWVyQWRkcmVzcy5WYXJpYWJsZXM+KFxyXG4gICAgICAgICAgICBVUERBVEVfQ1VTVE9NRVJfQUREUkVTUyxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW5wdXQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVDdXN0b21lckdyb3VwKGlucHV0OiBDcmVhdGVDdXN0b21lckdyb3VwSW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPENyZWF0ZUN1c3RvbWVyR3JvdXAuTXV0YXRpb24sIENyZWF0ZUN1c3RvbWVyR3JvdXAuVmFyaWFibGVzPihcclxuICAgICAgICAgICAgQ1JFQVRFX0NVU1RPTUVSX0dST1VQLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUN1c3RvbWVyR3JvdXAoaW5wdXQ6IFVwZGF0ZUN1c3RvbWVyR3JvdXBJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8VXBkYXRlQ3VzdG9tZXJHcm91cC5NdXRhdGlvbiwgVXBkYXRlQ3VzdG9tZXJHcm91cC5WYXJpYWJsZXM+KFxyXG4gICAgICAgICAgICBVUERBVEVfQ1VTVE9NRVJfR1JPVVAsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlucHV0LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlQ3VzdG9tZXJHcm91cChpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxEZWxldGVDdXN0b21lckdyb3VwLk11dGF0aW9uLCBEZWxldGVDdXN0b21lckdyb3VwLlZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIERFTEVURV9DVVNUT01FUl9HUk9VUCxcclxuICAgICAgICAgICAgeyBpZCB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q3VzdG9tZXJHcm91cExpc3Qob3B0aW9ucz86IEN1c3RvbWVyR3JvdXBMaXN0T3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxHZXRDdXN0b21lckdyb3Vwcy5RdWVyeSwgR2V0Q3VzdG9tZXJHcm91cHMuVmFyaWFibGVzPihcclxuICAgICAgICAgICAgR0VUX0NVU1RPTUVSX0dST1VQUyxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEN1c3RvbWVyR3JvdXBXaXRoQ3VzdG9tZXJzKGlkOiBzdHJpbmcsIG9wdGlvbnM6IEN1c3RvbWVyTGlzdE9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UucXVlcnk8XHJcbiAgICAgICAgICAgIEdldEN1c3RvbWVyR3JvdXBXaXRoQ3VzdG9tZXJzLlF1ZXJ5LFxyXG4gICAgICAgICAgICBHZXRDdXN0b21lckdyb3VwV2l0aEN1c3RvbWVycy5WYXJpYWJsZXNcclxuICAgICAgICA+KEdFVF9DVVNUT01FUl9HUk9VUF9XSVRIX0NVU1RPTUVSUywge1xyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgb3B0aW9ucyxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRDdXN0b21lcnNUb0dyb3VwKGdyb3VwSWQ6IHN0cmluZywgY3VzdG9tZXJJZHM6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxBZGRDdXN0b21lcnNUb0dyb3VwLk11dGF0aW9uLCBBZGRDdXN0b21lcnNUb0dyb3VwLlZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIEFERF9DVVNUT01FUlNfVE9fR1JPVVAsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGdyb3VwSWQsXHJcbiAgICAgICAgICAgICAgICBjdXN0b21lcklkcyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZUN1c3RvbWVyc0Zyb21Hcm91cChncm91cElkOiBzdHJpbmcsIGN1c3RvbWVySWRzOiBzdHJpbmdbXSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8XHJcbiAgICAgICAgICAgIFJlbW92ZUN1c3RvbWVyc0Zyb21Hcm91cC5NdXRhdGlvbixcclxuICAgICAgICAgICAgUmVtb3ZlQ3VzdG9tZXJzRnJvbUdyb3VwLlZhcmlhYmxlc1xyXG4gICAgICAgID4oUkVNT1ZFX0NVU1RPTUVSU19GUk9NX0dST1VQLCB7XHJcbiAgICAgICAgICAgIGdyb3VwSWQsXHJcbiAgICAgICAgICAgIGN1c3RvbWVySWRzLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEN1c3RvbWVySGlzdG9yeShpZDogc3RyaW5nLCBvcHRpb25zPzogSGlzdG9yeUVudHJ5TGlzdE9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UucXVlcnk8R2V0Q3VzdG9tZXJIaXN0b3J5LlF1ZXJ5LCBHZXRDdXN0b21lckhpc3RvcnkuVmFyaWFibGVzPihcclxuICAgICAgICAgICAgR0VUX0NVU1RPTUVSX0hJU1RPUlksXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZE5vdGVUb0N1c3RvbWVyKGN1c3RvbWVySWQ6IHN0cmluZywgbm90ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxBZGROb3RlVG9DdXN0b21lci5NdXRhdGlvbiwgQWRkTm90ZVRvQ3VzdG9tZXIuVmFyaWFibGVzPihcclxuICAgICAgICAgICAgQUREX05PVEVfVE9fQ1VTVE9NRVIsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlucHV0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm90ZSxcclxuICAgICAgICAgICAgICAgICAgICBpc1B1YmxpYzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGN1c3RvbWVySWQsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQ3VzdG9tZXJOb3RlKGlucHV0OiBVcGRhdGVDdXN0b21lck5vdGVJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8VXBkYXRlQ3VzdG9tZXJOb3RlLk11dGF0aW9uLCBVcGRhdGVDdXN0b21lck5vdGUuVmFyaWFibGVzPihcclxuICAgICAgICAgICAgVVBEQVRFX0NVU1RPTUVSX05PVEUsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlucHV0LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlQ3VzdG9tZXJOb3RlKGlkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPERlbGV0ZUN1c3RvbWVyTm90ZS5NdXRhdGlvbiwgRGVsZXRlQ3VzdG9tZXJOb3RlLlZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIERFTEVURV9DVVNUT01FUl9OT1RFLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==