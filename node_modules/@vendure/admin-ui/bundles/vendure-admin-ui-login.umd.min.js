!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@angular/core"),require("@angular/router"),require("@vendure/admin-ui/core"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@vendure/admin-ui/login",["exports","@angular/core","@angular/router","@vendure/admin-ui/core","rxjs/operators"],r):r(((e="undefined"!=typeof globalThis?globalThis:e||self).vendure=e.vendure||{},e.vendure["admin-ui"]=e.vendure["admin-ui"]||{},e.vendure["admin-ui"].login={}),e.ng.core,e.ng.router,e.vendure["admin-ui"].core,e.rxjs.operators)}(this,(function(e,r,n,t,a){"use strict";var o=function(){function e(e,r){this.authService=e,this.router=r,this.username="",this.password="",this.rememberMe=!1,this.version=t.ADMIN_UI_VERSION,this.brand=t.getAppConfig().brand,this.hideVendureBranding=t.getAppConfig().hideVendureBranding,this.hideVersion=t.getAppConfig().hideVersion}return e.prototype.logIn=function(){var e=this;this.errorMessage=void 0,this.authService.logIn(this.username,this.password,this.rememberMe).subscribe((function(r){switch(r.__typename){case"CurrentUser":var n=e.getRedirectRoute();e.router.navigateByUrl(n||"/");break;case"InvalidCredentialsError":case"NativeAuthStrategyError":e.errorMessage=r.message}}))},e.prototype.getRedirectRoute=function(){var e,r=new RegExp(t.AUTH_REDIRECT_PARAM+"=(.*)");try{var n=window.location.search.match(r);n&&1<n.length&&(e=atob(decodeURIComponent(n[1])))}catch(e){}return e},e}();o.decorators=[{type:r.Component,args:[{selector:"vdr-login",template:'<div class="login-wrapper">\r\n    <form class="login">\r\n        <label class="title"><img src="assets/logo-300px.png" /></label>\r\n        <div class="login-group">\r\n            <input\r\n                class="username"\r\n                type="text"\r\n                name="username"\r\n                id="login_username"\r\n                [(ngModel)]="username"\r\n                [placeholder]="\'common.username\' | translate"\r\n            />\r\n            <input\r\n                class="password"\r\n                name="password"\r\n                type="password"\r\n                id="login_password"\r\n                [(ngModel)]="password"\r\n                [placeholder]="\'common.password\' | translate"\r\n            />\r\n            <clr-alert [clrAlertType]="\'danger\'"  [clrAlertClosable]="false" [class.visible]="errorMessage" class="login-error">\r\n                <clr-alert-item>\r\n                    <span class="alert-text">\r\n                        {{ errorMessage }}\r\n                    </span>\r\n                </clr-alert-item>\r\n            </clr-alert>\r\n            <clr-checkbox-wrapper>\r\n                <input\r\n                    type="checkbox"\r\n                    clrCheckbox\r\n                    id="rememberme"\r\n                    name="rememberme"\r\n                    [(ngModel)]="rememberMe"\r\n                />\r\n                <label>{{ \'common.remember-me\' | translate }}</label>\r\n            </clr-checkbox-wrapper>\r\n            <button\r\n                type="submit"\r\n                class="btn btn-primary"\r\n                (click)="logIn()"\r\n                [disabled]="!username || !password"\r\n            >\r\n                {{ \'common.login\' | translate }}\r\n            </button>\r\n        </div>\r\n        <div class="version">\r\n            <span *ngIf="brand">{{ brand }} <span *ngIf="!hideVendureBranding || !hideVersion">-</span></span>\r\n            <span *ngIf="!hideVendureBranding">vendure</span>\r\n            <span *ngIf="!hideVersion">v{{ version }}</span>\r\n        </div>\r\n    </form>\r\n</div>\r\n',styles:[".login-wrapper{background:var(--login-page-bg);background-size:auto;justify-content:center}.title{text-align:center}.version{flex:1;display:flex;align-items:flex-end;justify-content:center;color:var(--color-grey-300)}.version span+span{margin-left:5px}.login-error{max-height:0;overflow:hidden}.login-error.visible{max-height:46px;transition:max-height .2s;-webkit-animation:shake .82s cubic-bezier(.36,.07,.19,.97) both;animation:shake .82s cubic-bezier(.36,.07,.19,.97) both;-webkit-animation-delay:.2s;animation-delay:.2s;transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden;perspective:1000px}@-webkit-keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}"]}]}],o.ctorParameters=function(){return[{type:t.AuthService},{type:n.Router}]};var i=function(){function e(e,r){this.router=e,this.authService=r}return e.prototype.canActivate=function(e){var r=this;return this.authService.checkAuthenticatedStatus().pipe(a.map((function(e){return e&&r.router.navigate(["/"]),!e})))},e}();i.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new i(r.ɵɵinject(n.Router),r.ɵɵinject(t.AuthService))},token:i,providedIn:"root"}),i.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],i.ctorParameters=function(){return[{type:n.Router},{type:t.AuthService}]};var s=[{path:"",component:o,pathMatch:"full",canActivate:[i]}],l=function(){};l.decorators=[{type:r.NgModule,args:[{imports:[t.SharedModule,n.RouterModule.forChild(s)],exports:[],declarations:[o]}]}],e.LoginComponent=o,e.LoginGuard=i,e.LoginModule=l,e.loginRoutes=s,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=vendure-admin-ui-login.umd.min.js.map