(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{d55m:function(e,n,t){"use strict";t.r(n),t.d(n,"LoginComponent",function(){return h}),t.d(n,"LoginGuard",function(){return m}),t.d(n,"LoginModule",function(){return v}),t.d(n,"loginRoutes",function(){return f});var r=t("EM62"),c=t("sEIs"),i=t("ixhn"),a=t("YtkY"),o=t("nIj0"),s=t("Kej3"),l=t("2kYt"),d=t("s2Ay");function p(e,n){1&e&&(r.jc(0,"span"),r.Vc(1,"-"),r.ic())}function u(e,n){if(1&e&&(r.jc(0,"span"),r.Vc(1),r.Tc(2,p,2,0,"span",12),r.ic()),2&e){const e=r.sc();r.Sb(1),r.Xc("",e.brand," "),r.Sb(1),r.zc("ngIf",!e.hideVendureBranding||!e.hideVersion)}}function g(e,n){1&e&&(r.jc(0,"span"),r.Vc(1,"vendure"),r.ic())}function b(e,n){if(1&e&&(r.jc(0,"span"),r.Vc(1),r.ic()),2&e){const e=r.sc();r.Sb(1),r.Xc("v",e.version,"")}}class h{constructor(e,n){this.authService=e,this.router=n,this.username="",this.password="",this.rememberMe=!1,this.version=i.a,this.brand=Object(i.gc)().brand,this.hideVendureBranding=Object(i.gc)().hideVendureBranding,this.hideVersion=Object(i.gc)().hideVersion}logIn(){this.errorMessage=void 0,this.authService.logIn(this.username,this.password,this.rememberMe).subscribe(e=>{switch(e.__typename){case"CurrentUser":const n=this.getRedirectRoute();this.router.navigateByUrl(n||"/");break;case"InvalidCredentialsError":case"NativeAuthStrategyError":this.errorMessage=e.message}})}getRedirectRoute(){let e;const n=new RegExp(`${i.b}=(.*)`);try{const t=window.location.search.match(n);t&&1<t.length&&(e=atob(decodeURIComponent(t[1])))}catch(t){}return e}}h.\u0275fac=function(e){return new(e||h)(r.dc(i.v),r.dc(c.e))},h.\u0275cmp=r.Xb({type:h,selectors:[["vdr-login"]],decls:25,vars:24,consts:[[1,"login-wrapper"],[1,"login"],[1,"title"],["src","assets/logo-300px.png"],[1,"login-group"],["type","text","name","username","id","login_username",1,"username",3,"ngModel","placeholder","ngModelChange"],["name","password","type","password","id","login_password",1,"password",3,"ngModel","placeholder","ngModelChange"],[1,"login-error",3,"clrAlertType","clrAlertClosable"],[1,"alert-text"],["type","checkbox","clrCheckbox","","id","rememberme","name","rememberme",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"version"],[4,"ngIf"]],template:function(e,n){1&e&&(r.jc(0,"div",0),r.jc(1,"form",1),r.jc(2,"label",2),r.ec(3,"img",3),r.ic(),r.jc(4,"div",4),r.jc(5,"input",5),r.qc("ngModelChange",function(e){return n.username=e}),r.tc(6,"translate"),r.ic(),r.jc(7,"input",6),r.qc("ngModelChange",function(e){return n.password=e}),r.tc(8,"translate"),r.ic(),r.jc(9,"clr-alert",7),r.jc(10,"clr-alert-item"),r.jc(11,"span",8),r.Vc(12),r.ic(),r.ic(),r.ic(),r.jc(13,"clr-checkbox-wrapper"),r.jc(14,"input",9),r.qc("ngModelChange",function(e){return n.rememberMe=e}),r.ic(),r.jc(15,"label"),r.Vc(16),r.tc(17,"translate"),r.ic(),r.ic(),r.jc(18,"button",10),r.qc("click",function(){return n.logIn()}),r.Vc(19),r.tc(20,"translate"),r.ic(),r.ic(),r.jc(21,"div",11),r.Tc(22,u,3,2,"span",12),r.Tc(23,g,2,0,"span",12),r.Tc(24,b,2,1,"span",12),r.ic(),r.ic(),r.ic()),2&e&&(r.Sb(5),r.zc("ngModel",n.username)("placeholder",r.uc(6,16,"common.username")),r.Sb(2),r.zc("ngModel",n.password)("placeholder",r.uc(8,18,"common.password")),r.Sb(2),r.Vb("visible",n.errorMessage),r.zc("clrAlertType","danger")("clrAlertClosable",!1),r.Sb(3),r.Xc(" ",n.errorMessage," "),r.Sb(2),r.zc("ngModel",n.rememberMe),r.Sb(2),r.Wc(r.uc(17,20,"common.remember-me")),r.Sb(2),r.zc("disabled",!n.username||!n.password),r.Sb(1),r.Xc(" ",r.uc(20,22,"common.login")," "),r.Sb(3),r.zc("ngIf",n.brand),r.Sb(1),r.zc("ngIf",!n.hideVendureBranding),r.Sb(1),r.zc("ngIf",!n.hideVersion))},directives:[o.E,o.q,o.r,s.u,i.eb,o.b,o.p,o.s,s.f,s.g,s.h,s.k,o.a,s.i,l.o],pipes:[d.d],styles:[".login-wrapper[_ngcontent-%COMP%]{background:var(--login-page-bg);background-size:auto;justify-content:center}.title[_ngcontent-%COMP%]{text-align:center}.version[_ngcontent-%COMP%]{flex:1;display:flex;align-items:flex-end;justify-content:center;color:var(--color-grey-300)}.version[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:5px}.login-error[_ngcontent-%COMP%]{max-height:0;overflow:hidden}.login-error.visible[_ngcontent-%COMP%]{max-height:46px;transition:max-height .2s;-webkit-animation:shake .82s cubic-bezier(.36,.07,.19,.97) both;animation:shake .82s cubic-bezier(.36,.07,.19,.97) both;-webkit-animation-delay:.2s;animation-delay:.2s;transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden;perspective:1000px}@-webkit-keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}"]}),h.ctorParameters=()=>[{type:i.v},{type:c.e}];class m{constructor(e,n){this.router=e,this.authService=n}canActivate(e){return this.authService.checkAuthenticatedStatus().pipe(Object(a.a)(e=>(e&&this.router.navigate(["/"]),!e)))}}m.\u0275fac=function(e){return new(e||m)(r.nc(c.e),r.nc(i.v))},m.\u0275prov=Object(r.Zb)({factory:function(){return new m(Object(r.nc)(c.e),Object(r.nc)(i.v))},token:m,providedIn:"root"}),m.ctorParameters=()=>[{type:c.e},{type:i.v}];const f=[{path:"",component:h,pathMatch:"full",canActivate:[m]}];class v{}v.\u0275fac=function(e){return new(e||v)},v.\u0275mod=r.bc({type:v}),v.\u0275inj=r.ac({imports:[[i.Nb,c.i.forChild(f)]]})}}]);
//# sourceMappingURL=9-es2015.fe50160e6ec5ef314733.js.map