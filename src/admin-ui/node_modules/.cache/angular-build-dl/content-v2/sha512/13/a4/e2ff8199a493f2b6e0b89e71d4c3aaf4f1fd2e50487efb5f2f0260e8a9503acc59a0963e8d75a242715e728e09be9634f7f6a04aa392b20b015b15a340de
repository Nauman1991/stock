(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{d55m:function(e,n,t){"use strict";t.r(n),t.d(n,"LoginComponent",function(){return h}),t.d(n,"LoginGuard",function(){return m}),t.d(n,"LoginModule",function(){return k}),t.d(n,"loginRoutes",function(){return f});var r=t("EM62"),c=t("sEIs"),a=t("ixhn"),s=t("YtkY"),o=t("nIj0"),i=t("Kej3"),l=t("2kYt"),d=t("s2Ay");function g(e,n){1&e&&(r.lc(0,"span"),r.bd(1,"-"),r.kc())}function p(e,n){if(1&e&&(r.lc(0,"span"),r.bd(1),r.Zc(2,g,2,0,"span",12),r.kc()),2&e){const e=r.xc();r.Tb(1),r.dd("",e.brand," "),r.Tb(1),r.Ec("ngIf",!e.hideVendureBranding||!e.hideVersion)}}function b(e,n){1&e&&(r.lc(0,"span"),r.bd(1,"vendure"),r.kc())}function u(e,n){if(1&e&&(r.lc(0,"span"),r.bd(1),r.kc()),2&e){const e=r.xc();r.Tb(1),r.dd("v",e.version,"")}}class h{constructor(e,n){this.authService=e,this.router=n,this.username="",this.password="",this.rememberMe=!1,this.version=a.a,this.brand=Object(a.gc)().brand,this.hideVendureBranding=Object(a.gc)().hideVendureBranding,this.hideVersion=Object(a.gc)().hideVersion}logIn(){this.errorMessage=void 0,this.authService.logIn(this.username,this.password,this.rememberMe).subscribe(e=>{switch(e.__typename){case"CurrentUser":const n=this.getRedirectRoute();this.router.navigateByUrl(n||"/");break;case"InvalidCredentialsError":case"NativeAuthStrategyError":this.errorMessage=e.message}})}getRedirectRoute(){let e;const n=new RegExp(`${a.b}=(.*)`);try{const t=window.location.search.match(n);t&&1<t.length&&(e=atob(decodeURIComponent(t[1])))}catch(t){}return e}}h.\u0275fac=function(e){return new(e||h)(r.fc(a.v),r.fc(c.e))},h.\u0275cmp=r.Zb({type:h,selectors:[["vdr-login"]],decls:25,vars:24,consts:[[1,"login-wrapper"],[1,"login"],[1,"title"],["src","assets/logo-300px.png"],[1,"login-group"],["type","text","name","username","id","login_username",1,"username",3,"ngModel","placeholder","ngModelChange"],["name","password","type","password","id","login_password",1,"password",3,"ngModel","placeholder","ngModelChange"],[1,"login-error",3,"clrAlertType","clrAlertClosable"],[1,"alert-text"],["type","checkbox","clrCheckbox","","id","rememberme","name","rememberme",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"version"],[4,"ngIf"]],template:function(e,n){1&e&&(r.lc(0,"div",0),r.lc(1,"form",1),r.lc(2,"label",2),r.gc(3,"img",3),r.kc(),r.lc(4,"div",4),r.lc(5,"input",5),r.vc("ngModelChange",function(e){return n.username=e}),r.yc(6,"translate"),r.kc(),r.lc(7,"input",6),r.vc("ngModelChange",function(e){return n.password=e}),r.yc(8,"translate"),r.kc(),r.lc(9,"clr-alert",7),r.lc(10,"clr-alert-item"),r.lc(11,"span",8),r.bd(12),r.kc(),r.kc(),r.kc(),r.lc(13,"clr-checkbox-wrapper"),r.lc(14,"input",9),r.vc("ngModelChange",function(e){return n.rememberMe=e}),r.kc(),r.lc(15,"label"),r.bd(16),r.yc(17,"translate"),r.kc(),r.kc(),r.lc(18,"button",10),r.vc("click",function(){return n.logIn()}),r.bd(19),r.yc(20,"translate"),r.kc(),r.kc(),r.lc(21,"div",11),r.Zc(22,p,3,2,"span",12),r.Zc(23,b,2,0,"span",12),r.Zc(24,u,2,1,"span",12),r.kc(),r.kc(),r.kc()),2&e&&(r.Tb(5),r.Ec("ngModel",n.username)("placeholder",r.zc(6,16,"common.username")),r.Tb(2),r.Ec("ngModel",n.password)("placeholder",r.zc(8,18,"common.password")),r.Tb(2),r.Xb("visible",n.errorMessage),r.Ec("clrAlertType","danger")("clrAlertClosable",!1),r.Tb(3),r.dd(" ",n.errorMessage," "),r.Tb(2),r.Ec("ngModel",n.rememberMe),r.Tb(2),r.cd(r.zc(17,20,"common.remember-me")),r.Tb(2),r.Ec("disabled",!n.username||!n.password),r.Tb(1),r.dd(" ",r.zc(20,22,"common.login")," "),r.Tb(3),r.Ec("ngIf",n.brand),r.Tb(1),r.Ec("ngIf",!n.hideVendureBranding),r.Tb(1),r.Ec("ngIf",!n.hideVersion))},directives:[o.E,o.q,o.r,i.u,a.eb,o.b,o.p,o.s,i.f,i.g,i.h,i.k,o.a,i.i,l.o],pipes:[d.d],styles:[".login-wrapper[_ngcontent-%COMP%]{background:var(--login-page-bg);background-size:auto;justify-content:center}.title[_ngcontent-%COMP%]{text-align:center}.version[_ngcontent-%COMP%]{flex:1;display:flex;align-items:flex-end;justify-content:center;color:var(--color-grey-300)}.version[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:5px}.login-error[_ngcontent-%COMP%]{max-height:0;overflow:hidden}.login-error.visible[_ngcontent-%COMP%]{max-height:46px;transition:max-height .2s;-webkit-animation:shake .82s cubic-bezier(.36,.07,.19,.97) both;animation:shake .82s cubic-bezier(.36,.07,.19,.97) both;-webkit-animation-delay:.2s;animation-delay:.2s;transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden;perspective:1000px}@-webkit-keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}"]}),h.ctorParameters=()=>[{type:a.v},{type:c.e}];class m{constructor(e,n){this.router=e,this.authService=n}canActivate(e){return this.authService.checkAuthenticatedStatus().pipe(Object(s.a)(e=>(e&&this.router.navigate(["/"]),!e)))}}m.\u0275fac=function(e){return new(e||m)(r.sc(c.e),r.sc(a.v))},m.\u0275prov=Object(r.bc)({factory:function(){return new m(Object(r.sc)(c.e),Object(r.sc)(a.v))},token:m,providedIn:"root"}),m.ctorParameters=()=>[{type:c.e},{type:a.v}];const f=[{path:"",component:h,pathMatch:"full",canActivate:[m]}];class k{}k.\u0275fac=function(e){return new(e||k)},k.\u0275mod=r.dc({type:k}),k.\u0275inj=r.cc({imports:[[a.Nb,c.i.forChild(f)]]})}}]);
//# sourceMappingURL=9-es2015.324fea3de0f6586b76a2.js.map